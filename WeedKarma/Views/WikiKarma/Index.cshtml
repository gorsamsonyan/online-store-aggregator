@using Weed.Karma.Models.Post
@model BlogAllPostsViewModel
@{
    int p = 0;
}
@{
    Layout = null;
}
<!doctype html>
<html lang="en">
<head>
    <title>Wiki Karma &mdash; Wiki Blog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300, 400,700" rel="stylesheet">
    <link rel="stylesheet" href="~/css/pages/bootstrap.css">
    <link rel="stylesheet" href="~/css/pages/animate.css">
    <link rel="stylesheet" href="~/css/pages/owl.carousel.min.css">
    <link rel="stylesheet" href="~/font/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="~/font/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/font/flaticon/font/flaticon.css">
    <!-- Theme Style -->
    <link rel="stylesheet" href="~/css/pages/style.css">
</head>
<body>
    <header role="banner">
        <div class="top-bar">
            <div class="container">
                <div class="row">
                    <div class="col-9 social">
                        <a href="/"><span class="fa fa-arrow-left"></span> Weed Karma</a>
                        <a href="#"><span class="fa fa-twitter"></span></a>
                        <a href="#"><span class="fa fa-facebook"></span></a>
                        <a href="#"><span class="fa fa-instagram"></span></a>
                        <a href="#"><span class="fa fa-youtube-play"></span></a>
                        <a href="#"><span class="fa fa-vimeo"></span></a>
                        @if (User.Identity.IsAuthenticated)
                        {
                            if (User.IsInRole("Moderator"))
                            {
                                <a href="/WikiKarma/AddPost"><span>Add post +</span></a>
                            }
                        }
                    </div>
                    <div class="col-3 search-top">
                        <!-- <a href="#"><span class="fa fa-search"></span></a> -->
                       
                    </div>
                </div>
            </div>
        </div>
        <div class="container logo-wrap">
            <div class="row pt-5">
                <div class="col-12 text-center">
                    <a class="absolute-toggle d-block d-md-none" data-toggle="collapse" href="#navbarMenu" role="button" aria-expanded="false" aria-controls="navbarMenu"><span class="burger-lines"></span></a>
                    <h1 class="site-logo"><a href="/WikiKarma">Wiki Karma</a></h1>
                </div>
            </div>
        </div>
        <nav class="navbar navbar-expand-md  navbar-light bg-light">
            <div class="container">
                @*<div class="collapse navbar-collapse" id="navbarMenu">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="index.html">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="category.html" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Travel</a>
                            <div class="dropdown-menu" aria-labelledby="dropdown04">
                                <a class="dropdown-item" href="category.html">Asia</a>
                                <a class="dropdown-item" href="category.html">Europe</a>
                                <a class="dropdown-item" href="category.html">Dubai</a>
                                <a class="dropdown-item" href="category.html">Africa</a>
                                <a class="dropdown-item" href="category.html">South America</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="category.html" id="dropdown05" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Categories</a>
                            <div class="dropdown-menu" aria-labelledby="dropdown05">
                                <a class="dropdown-item" href="category.html">Lifestyle</a>
                                <a class="dropdown-item" href="category.html">Food</a>
                                <a class="dropdown-item" href="category.html">Adventure</a>
                                <a class="dropdown-item" href="category.html">Travel</a>
                                <a class="dropdown-item" href="category.html">Business</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>*@
            </div>
        </nav>
    </header>
    <!-- END header -->
    <section class="site-section pt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="owl-carousel owl-theme home-slider">
                        @foreach (var item in Model.BlogTopPosts)
                        {
                            <div>
                                <a href="/WikiKarma/Post/@item.Id" class="a-block d-flex align-items-center height-lg" style="background-image: url('@item.MainImgSrc'); ">
                                    <div class="text half-to-full">
                                        <div class="post-meta">
                                            <span class="category">Lifestyle</span>
                                            <span class="mr-2">@string.Format("{0:ddd, MMM, yyyy}", item.CreatedDate) </span> &bullet;
                                            <span class="ml-2"><span class="fa fa-comments"></span>@item.PostComments.Count()</span>
                                            <span class="ml-2"><span class="fa fa-eye"></span>@item.ViewCount</span>

                                        </div>
                                        <h3>@item.Title</h3>
                                        <p>@item.Description</p>
                                    </div>
                                </a>
                            </div>
                        }
                    </div>

                </div>
            </div>
            <div class="row">
                @foreach (var item in Model.BlogTopPosts)
                {

                    <div class="col-md-6 col-lg-4">
                        <a href="/WikiKarma/Post/@item.Id" class="a-block d-flex align-items-center height-md" style="background-image: url('@item.MainImgSrc'); ">
                            <div class="text">
                                <div class="post-meta">
                                    <span class="category">Lifestyle</span>
                                    <span class="mr-2">@string.Format("{0:ddd, MMM, yyyy}", item.CreatedDate)</span> &bullet;
                                    <span class="ml-2"><span class="fa fa-comments"></span> @item.PostComments.Count()</span>
                                    <span class="ml-2"><span class="fa fa-eye"></span>@item.ViewCount</span>

                                </div>
                                <h3>@item.Title</h3>
                            </div>
                        </a>
                    </div>
                }
            </div>
        </div>
    </section>
    <!-- END section -->
    <section class="site-section py-sm">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h2 class="mb-4">All Posts</h2>
                </div>
            </div>
            <div class="row blog-entries">
                <div class="col-md-12 col-lg-8 main-content">
                    <div class="row">
                        @foreach (var item in Model.BlogPostsByDate)
                        {
                            <div class="col-md-6">
                                <a href="/WikiKarma/Post/@item.Id" class="blog-entry element-animate" data-animate-effect="fadeIn">
                                    <img src="@item.MainImgSrc" alt="Image placeholder">
                                    <div class="blog-content-body">
                                        <div class="post-meta">
                                            <span class="category">Food</span>
                                            <span class="mr-2">@string.Format("{0:ddd, MMM, yyyy}", item.CreatedDate) </span> &bullet;
                                            <span class="ml-2"><span class="fa fa-comments"></span>@item.PostComments.Count()</span>
                                            <span class="ml-2"><span class="fa fa-eye"></span>@item.ViewCount</span>

                                        </div>
                                        <h2>@item.Title</h2>
                                    </div>
                                </a>
                            </div>
                        }
                    </div>
                    <div class="row">
                        <div class="col-md-12 text-center">
                            @*<nav aria-label="Page navigation" class="text-center">
                                    <ul class="pagination">

                                        <li class="page-item  active"><a class="page-link" href="#">Prev</a></li>


                                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>


                                        <li class="page-item"><a class="page-link" href="#">Next</a></li>

                                    </ul>
                                </nav>*@
                            <nav aria-label="Page navigation" class="text-center">
                                <div class="page-item">
                                    <ul class="pagination">
                                        @if (Model.PagingInfo.CurrentPage <= 1)
                                        {

                                            <li class="page-item">
                                                <a href="1" class="page-link not-active"><i class="fa fa-chevron-left"></i> First</a>
                                            </li>
                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.PreviousPage" class="page-link not-active"><i class="fa fa-chevron-left"></i> </a>
                                            </li>

                                        }
                                        else
                                        {
                                            <li class="page-item">
                                                <a href="1" class="page-link"><i class="fa fa-chevron-left"></i> First</a>
                                            </li>
                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.PreviousPage" class="page-link"><i class="fa fa-chevron-left"></i></a>
                                            </li>

                                        }


                                        @if (Model.PagingInfo.CurrentPage + 5 >= Model.PagingInfo.TotalPages)
                                        {
                                            p = (int)Model.PagingInfo.TotalPages + 1;

                                        }
                                        else
                                        {
                                            p = Model.PagingInfo.CurrentPage + 5;
                                        }

                                        @for (int i = Model.PagingInfo.NextPage - 5 < 1 ? 1 : Model.PagingInfo.NextPage - 5; i < p; i++)
                                        {
                                            if (Model.PagingInfo.CurrentPage == i)
                                            {
                                                <li class="page-item active ">
                                                    <a href="/WikiKarma/@i" class="page-link ">@i</a>
                                                </li>

                                            }
                                            else
                                            {
                                                <li class="page-item">
                                                    <a href="/WikiKarma/@i" class="page-link">@i</a>
                                                </li>

                                            }
                                        }





                                        @if (Model.PagingInfo.CurrentPage == Model.PagingInfo.TotalPages)
                                        {
                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.NextPage" class="page-link not-active"><i class="fa fa-chevron-right"></i> </a>
                                            </li>

                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.TotalPages" class="page-link not-active">Last <i class="fa fa-chevron-right"></i></a>
                                            </li>

                                        }
                                        else
                                        {
                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.NextPage" class="page-link"><i class="fa fa-chevron-right"></i> </a>
                                            </li>

                                            <li class="page-item">
                                                <a href="/WikiKarma/@Model.PagingInfo.TotalPages" class="page-link">Last <i class="fa fa-chevron-right"></i></a>
                                            </li>


                                        }
                                    </ul>

                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
                <!-- END main-content -->
                <div class="col-md-12 col-lg-4 sidebar">
                    @*<div class="sidebar-box search-form-wrap">
                        <form action="#" class="search-form">
                            <div class="form-group">
                                <span class="icon fa fa-search"></span>
                                <input type="text" class="form-control" id="s" placeholder="Type a keyword and hit enter">
                            </div>
                        </form>
                     </div>*@
                    <!-- END sidebar-box -->
                    @*<div class="sidebar-box">
                            <div class="bio text-center">
                                <img src="~/images/person_1.jpg" alt="Image Placeholder" class="img-fluid">
                                <div class="bio-body">
                                    <h2>Meagan Smith</h2>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem facilis sunt repellendus excepturi beatae porro debitis voluptate nulla quo veniam fuga sit molestias minus.</p>
                                    <p><a href="#" class="btn btn-primary btn-sm">Read my bio</a></p>
                                    <p class="social">
                                        <a href="#" class="p-2"><span class="fa fa-facebook"></span></a>
                                        <a href="#" class="p-2"><span class="fa fa-twitter"></span></a>
                                        <a href="#" class="p-2"><span class="fa fa-instagram"></span></a>
                                        <a href="#" class="p-2"><span class="fa fa-youtube-play"></span></a>
                                    </p>
                                </div>
                            </div>
                        </div>*@
                    <!-- END sidebar-box -->
                    <div class="sidebar-box">
                        <h3 class="heading">Popular Posts</h3>
                        <div class="post-entry-sidebar">
                            <ul>
                                <li>
                                    @if (Model.BlogPopularPosts.Count() > 0)
                                    {
                                        @foreach (var item in Model.BlogPopularPosts.Take(7))
                                        {
                                            <a href="">
                                                <img src="@item.MainImgSrc" alt="Image placeholder" class="mr-4">
                                                <div class="text">
                                                    <h4>@item.Title</h4>
                                                    <div class="post-meta">
                                                        <span class="mr-2">@string.Format("{0:ddd, MMM, yyyy}", item.CreatedDate)</span> &bullet;
                                                        <span class="ml-2"><span class="fa fa-comments"></span>@item.PostComments.Count()</span>
                                                        <span class="ml-2"><span class="fa fa-eye"></span>@item.ViewCount</span>

                                                    </div>
                                                </div>
                                            </a>
                                        }
                                    }
                                </li>

                            </ul>
                        </div>
                    </div>
                    <!-- END sidebar-box -->
                    @*<div class="sidebar-box">
                        <h3 class="heading">Categories</h3>
                        <ul class="categories">
                            <li><a href="#">Courses <span>(12)</span></a></li>
                            <li><a href="#">News <span>(22)</span></a></li>
                            <li><a href="#">Design <span>(37)</span></a></li>
                            <li><a href="#">HTML <span>(42)</span></a></li>
                            <li><a href="#">Web Development <span>(14)</span></a></li>
                        </ul>
                    </div>*@
                    <!-- END sidebar-box -->
                    @*<div class="sidebar-box">
                            <h3 class="heading">Tags</h3>
                            <ul class="tags">
                                <li><a href="#">Travel</a></li>
                                <li><a href="#">Adventure</a></li>
                                <li><a href="#">Food</a></li>
                                <li><a href="#">Lifestyle</a></li>
                                <li><a href="#">Business</a></li>
                                <li><a href="#">Freelancing</a></li>
                                <li><a href="#">Travel</a></li>
                                <li><a href="#">Adventure</a></li>
                                <li><a href="#">Food</a></li>
                                <li><a href="#">Lifestyle</a></li>
                                <li><a href="#">Business</a></li>
                                <li><a href="#">Freelancing</a></li>
                            </ul>
                        </div>*@
                </div>
                <!-- END sidebar -->
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="container">
            <div class="row mb-5">
                <div class="col-md-4">
                    <h3>Paragraph</h3>
                    <p>
                        <img src="~/img/logo.svg" alt="Image placeholder" class="img-fluid">
                    </p>

                </div>
                <div class="col-md-6 ml-auto">
                    <div class="row">
                        <div class="col-md-7">
                            <h3>Latest Post</h3>
                            <div class="post-entry-sidebar">
                                <ul>
                                    @foreach (var item in Model.BlogPostsByDate.Take(3))
                                    {
                                        <li>
                                            <a href="">
                                                <img src="@item.MainImgSrc" alt="Image placeholder" class="mr-4">
                                                <div class="text">
                                                    <h4>@item.Title</h4>
                                                    <div class="post-meta">
                                                        <span class="mr-2">@item.CreatedDate.ToString("dddd dd, MMMM yyyy")</span> &bullet;
                                                        <span class="ml-2"><span class="fa fa-comments"></span>@item.PostComments.Count()</span>
                                                        <span class="ml-2"><span class="fa fa-eye"></span>@item.ViewCount</span>

                                                    </div>
                                                </div>
                                            </a>
                                        </li>
                                    }

                                </ul>
                            </div>
                        </div>
                      
                        <div class="col-md-1"></div>

                        @*<div class="col-md-4">
                            <div class="mb-5">
                                <h3>Quick Links</h3>
                                <ul class="list-unstyled">
                                    <li><a href="#">About Us</a></li>
                                    <li><a href="#">Travel</a></li>
                                    <li><a href="#">Adventure</a></li>
                                    <li><a href="#">Courses</a></li>
                                    <li><a href="#">Categories</a></li>
                                </ul>
                            </div>*@

                            @*<div class="mb-5">
                                    <h3>Social</h3>
                                    <ul class="list-unstyled footer-social">
                                        <li><a href="#"><span class="fa fa-twitter"></span> Twitter</a></li>
                                        <li><a href="#"><span class="fa fa-facebook"></span> Facebook</a></li>
                                        <li><a href="#"><span class="fa fa-instagram"></span> Instagram</a></li>
                                        <li><a href="#"><span class="fa fa-vimeo"></span> Vimeo</a></li>
                                        <li><a href="#"><span class="fa fa-youtube-play"></span> Youtube</a></li>
                                        <li><a href="#"><span class="fa fa-snapchat"></span> Snapshot</a></li>
                                    </ul>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    <a href="/" target="_blank">WeedKarma</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                </div>
            </div>
        </div>
    </footer>
    <!-- END footer -->
    <!-- loader -->
    <div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" /><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#f4b214" /></svg></div>
    <script src="~/js/jquery-3.2.1.min.js"></script>
    <script src="~/js/jquery-migrate-3.0.0.js"></script>
    <script src="~/js/popper.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/owl.carousel.min.js"></script>
    <script src="~/js/jquery.waypoints.min.js"></script>
    <script src="~/js/jquery.stellar.min.js"></script>

    <script src="~/js/main.js"></script>
</body>
</html>
<style>


    .not-active {
        color: #777;
        cursor: not-allowed;
        background-color: #fff;
        border-color: #ddd;
        pointer-events: none;
    }
</style>
<style>


    .active {
        color: #1e7e41;
        cursor: not-allowed;
        background-color: #fff;
        border-color: #ddd;
        pointer-events: none;
    }
</style>